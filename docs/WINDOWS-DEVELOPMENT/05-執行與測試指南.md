# 執行與測試指南

## 概述

本文件說明如何在 Windows 正式環境中執行 DMS System，以及如何訪問 Swagger 和 React 前端。

---

## 重要概念：Swagger 與 React 的區別

### Swagger（API 文檔與測試工具）
- **位置**：運行在後端 API 伺服器上
- **URL**：`http://localhost:5137/swagger` 或 `https://localhost:7036/swagger`
- **用途**：
  - 查看所有 API 端點的文檔
  - 直接在瀏覽器中測試 API
  - 查看 API 的請求和回應格式
- **啟動方式**：當後端 API 啟動時自動可用

### React（前端應用）
- **位置**：運行在獨立的開發伺服器上（Vite）
- **URL**：`http://localhost:5173`
- **用途**：
  - 用戶界面（UI）
  - 檔案上傳功能
  - 資料顯示頁面
- **啟動方式**：需要單獨執行 `npm run dev`

---

## 執行步驟

### 1. 啟動後端 API（Swagger）

#### 方式 A：使用 Visual Studio 2022
1. 開啟 `DMS.sln`
2. 設定 `DmsSystem.Api` 為啟動專案
3. 選擇啟動設定檔：
   - **http**：`http://localhost:5137`
   - **https**：`https://localhost:7036`
4. 按 F5 或點擊「執行」
5. **如果瀏覽器沒有自動開啟**，請手動訪問：
   - HTTP：`http://localhost:5137/swagger`
   - HTTPS：`https://localhost:7036/swagger`

#### 方式 B：使用命令列
```bash
cd DmsSystem.Api
dotnet run
```

啟動後，訪問：`http://localhost:5137/swagger`

---

### 2. 啟動前端 React（可選）

如果需要測試完整的前端功能：

```bash
cd react-client
npm install  # 僅首次需要
npm run dev
```

啟動後，訪問：`http://localhost:5173`

---

## 常見問題

### Q1：執行後 Swagger 沒有自動跳出頁面？

**解決方案**：
1. 檢查 VS2022 的啟動設定檔是否正確
2. 確認 `launchSettings.json` 中的 `launchBrowser` 設為 `true`
3. **手動訪問**：在瀏覽器中輸入 `http://localhost:5137/swagger`

### Q2：Swagger 頁面顯示 404？

**可能原因**：
- API 尚未完全啟動（等待幾秒後再試）
- 環境變數設定錯誤
- 連接字串設定錯誤導致啟動失敗

**解決方案**：
1. 檢查 Visual Studio 的「輸出」視窗，查看是否有錯誤訊息
2. 確認 `appsettings.json` 中的資料庫連接字串正確
3. 檢查 `Program.cs` 中的 Swagger 設定

### Q3：React 和 Swagger 是同一個網頁嗎？

**不是**。它們是完全不同的應用：
- **Swagger**：後端 API 文檔工具（`localhost:5137/swagger`）
- **React**：前端用戶界面（`localhost:5173`）

### Q4：如何確認 API 已成功啟動？

**檢查方式**：
1. 查看 Visual Studio 的「輸出」視窗，應該看到：
   ```
   應用程式啟動完成
   Now listening on: http://localhost:5137
   ```
2. 訪問 `http://localhost:5137/swagger`，應該看到 Swagger UI
3. 訪問 `http://localhost:5137/api/DataView/shareholder-meetings`，應該看到 JSON 資料

---

## 測試 API 端點

### 使用 Swagger UI
1. 訪問 `http://localhost:5137/swagger`
2. 展開任何 API 端點（例如 `GET /api/DataView/shareholder-meetings`）
3. 點擊「Try it out」
4. 點擊「Execute」
5. 查看回應結果

### 使用 curl（命令列）
```bash
# 測試股東會資料
curl http://localhost:5137/api/DataView/shareholder-meetings

# 測試公司資訊
curl http://localhost:5137/api/DataView/company-info

# 測試股票餘額
curl http://localhost:5137/api/DataView/stock-balance
```

---

## 預設連接埠

| 服務 | 連接埠 | URL |
|------|--------|-----|
| API (HTTP) | 5137 | `http://localhost:5137` |
| API (HTTPS) | 7036 | `https://localhost:7036` |
| Swagger | 5137 | `http://localhost:5137/swagger` |
| React (Vite) | 5173 | `http://localhost:5173` |

---

## 下一步

- 測試完成後，請參考 `docs/FEATURES/` 中的功能開發指南
- 如需修改 API 端點，請參考 `docs/01-架構指南.md`
- 如需修改資料庫設定，請參考 `docs/03-資料庫配置.md`

