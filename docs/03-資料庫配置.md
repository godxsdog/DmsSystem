# Windows ç’°å¢ƒè³‡æ–™åº«é…ç½®æŒ‡å—

## è³‡æ–™åº«ç’°å¢ƒ

**Windows æ­£å¼ç’°å¢ƒ**ï¼šé€£æ¥æ­£å¼å€ SQL Server

## é€£æ¥å­—ä¸²è¨­å®š

### æ–¹å¼ä¸€ï¼šä¿®æ”¹ appsettings.Production.json

**ä½ç½®**ï¼š`DmsSystem.Api/appsettings.Production.json`

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=æ­£å¼ä¼ºæœå™¨ä½å€;Database=DMS;User Id=æ­£å¼ä½¿ç”¨è€…;Password=æ­£å¼å¯†ç¢¼;TrustServerCertificate=True;MultipleActiveResultSets=True"
  }
}
```

**âš ï¸ é‡è¦**ï¼šè«‹æ›¿æ›ç‚ºæ­£å¼ç’°å¢ƒçš„å¯¦éš›é€£æ¥è³‡è¨Š

### æ–¹å¼äºŒï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼ˆæ¨è–¦ï¼Œæ›´å®‰å…¨ï¼‰

**PowerShell**ï¼š
```powershell
$env:ConnectionStrings__DefaultConnection="Server=æ­£å¼ä¼ºæœå™¨ä½å€;Database=DMS;User Id=æ­£å¼ä½¿ç”¨è€…;Password=æ­£å¼å¯†ç¢¼;TrustServerCertificate=True;MultipleActiveResultSets=True"
$env:ASPNETCORE_ENVIRONMENT="Production"
```

**å‘½ä»¤æç¤ºå­—å…ƒï¼ˆCMDï¼‰**ï¼š
```cmd
set ConnectionStrings__DefaultConnection=Server=æ­£å¼ä¼ºæœå™¨ä½å€;Database=DMS;User Id=æ­£å¼ä½¿ç”¨è€…;Password=æ­£å¼å¯†ç¢¼;TrustServerCertificate=True;MultipleActiveResultSets=True
set ASPNETCORE_ENVIRONMENT=Production
```

## é€£æ¥å­—ä¸²æ ¼å¼èªªæ˜

```
Server=<ä¼ºæœå™¨ä½å€>,<åŸ è™Ÿ>;Database=<è³‡æ–™åº«åç¨±>;User Id=<ä½¿ç”¨è€…åç¨±>;Password=<å¯†ç¢¼>;TrustServerCertificate=True;MultipleActiveResultSets=True
```

### åƒæ•¸èªªæ˜

- **Server**: SQL Server ä½å€å’ŒåŸ è™Ÿï¼ˆæ­£å¼ç’°å¢ƒï¼‰
- **Database**: è³‡æ–™åº«åç¨±ï¼ˆé è¨­ç‚º `DMS`ï¼‰
- **User Id**: SQL Server ç™»å…¥å¸³è™Ÿ
- **Password**: SQL Server ç™»å…¥å¯†ç¢¼
- **TrustServerCertificate**: ä¿¡ä»»ä¼ºæœå™¨æ†‘è­‰
- **MultipleActiveResultSets**: å…è¨±å¤šå€‹æ´»å‹•çµæœé›†

## ç’°å¢ƒè®Šæ•¸å„ªå…ˆé †åº

ASP.NET Core æœƒä¾ç…§ä»¥ä¸‹é †åºè¼‰å…¥è¨­å®šï¼ˆå¾Œé¢çš„æœƒè¦†è“‹å‰é¢çš„ï¼‰ï¼š

1. `appsettings.json`
2. `appsettings.{Environment}.json`ï¼ˆä¾‹å¦‚ `appsettings.Production.json`ï¼‰
3. ç’°å¢ƒè®Šæ•¸

## è¨­å®š ASP.NET Core ç’°å¢ƒ

### Windows PowerShell
```powershell
$env:ASPNETCORE_ENVIRONMENT="Production"
```

### Windows CMD
```cmd
set ASPNETCORE_ENVIRONMENT=Production
```

## é©—è­‰é€£æ¥

### ä½¿ç”¨ SQL Server Management Studio (SSMS)

1. é–‹å•Ÿ SSMS
2. è¼¸å…¥ä¼ºæœå™¨ä½å€ã€ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼
3. é€£æ¥æ¸¬è©¦

### ä½¿ç”¨å‘½ä»¤åˆ—

```powershell
sqlcmd -S æ­£å¼ä¼ºæœå™¨ä½å€ -U æ­£å¼ä½¿ç”¨è€… -P æ­£å¼å¯†ç¢¼ -d DMS -Q "SELECT DB_NAME()"
```

## å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•ç¢ºèªé€£æ¥å­—ä¸²æ˜¯å¦æ­£ç¢ºï¼Ÿ

A: åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œå¦‚æœé€£æ¥å­—ä¸²éŒ¯èª¤ï¼Œæœƒåœ¨å•Ÿå‹•æ™‚æ‹‹å‡ºä¾‹å¤–ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ SQL Server Management Studio æˆ– `sqlcmd` æ¸¬è©¦é€£æ¥ã€‚

### Q: å¦‚ä½•ä¿è­·ç”Ÿç”¢ç’°å¢ƒçš„å¯†ç¢¼ï¼Ÿ

A: 
1. ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼ˆæ¨è–¦ï¼‰
2. ä½¿ç”¨ Azure Key Vault æˆ–å…¶ä»–å¯†ç¢¼ç®¡ç†æœå‹™
3. ä¸è¦åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼å¯†ç¢¼

### Q: é€£æ¥å¤±æ•—æ€éº¼è¾¦ï¼Ÿ

A: æª¢æŸ¥ï¼š
1. SQL Server æ˜¯å¦æ­£åœ¨é‹è¡Œ
2. é˜²ç«ç‰†è¨­å®šæ˜¯å¦å…è¨±é€£æ¥
3. é€£æ¥å­—ä¸²ä¸­çš„åƒæ•¸æ˜¯å¦æ­£ç¢º
4. ä½¿ç”¨è€…å¸³è™Ÿæ˜¯å¦æœ‰è¶³å¤ æ¬Šé™
5. ç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸

### Q: å¦‚ä½•åˆ‡æ›ä¸åŒçš„è³‡æ–™åº«ï¼Ÿ

A: ä¿®æ”¹é€£æ¥å­—ä¸²ä¸­çš„ `Database` åƒæ•¸ï¼Œæˆ–ä½¿ç”¨ä¸åŒçš„ç’°å¢ƒè®Šæ•¸è¨­å®šã€‚

## âš ï¸ é‡è¦æé†’

- **æ­¤é…ç½®å°ˆç‚º Windows æ­£å¼ç’°å¢ƒè¨­è¨ˆ**
- è«‹ç¢ºä¿æ‚¨æœ‰æ­£å¼å€ SQL Server çš„é€£æ¥æ¬Šé™
- ç”Ÿç”¢ç’°å¢ƒå¯†ç¢¼è«‹å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±

## ğŸ”— ç›¸é—œæ–‡ä»¶

- **å®Œæ•´ç’°å¢ƒè¨­å®š**ï¼š[Windows é–‹ç™¼ç’°å¢ƒå®Œæ•´æ‰‹å†Š](./WINDOWS-DEVELOPMENT/01-Windowsé–‹ç™¼ç’°å¢ƒå®Œæ•´æ‰‹å†Š.md)
- **å¿«é€Ÿé–‹å§‹**ï¼š[å¿«é€Ÿé–‹å§‹æŒ‡å—](./00-å¿«é€Ÿé–‹å§‹.md)
