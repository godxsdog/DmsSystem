# 測試資料載入指南

## 方法一：使用 SQL 腳本（推薦）

### 1. 確保 SQL Server 正在運行

```bash
cd DmsSystem
docker-compose up -d
```

### 2. 等待 SQL Server 啟動（約 30-60 秒）

```bash
docker exec -it dms-sqlserver /opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P 'DmsSystem@2024' -d DMS -Q "SELECT DB_NAME()"
```

### 3. 載入測試資料

#### 方式 A：直接執行 SQL 腳本

```bash
docker exec -i dms-sqlserver /opt/mssql-tools/bin/sqlcmd \
  -S localhost \
  -U sa \
  -P 'DmsSystem@2024' \
  -d DMS \
  -i /var/opt/mssql/backup/seed-test-data.sql
```

#### 方式 B：複製腳本到容器並執行

```bash
# 複製腳本到容器
docker cp scripts/seed-test-data.sql dms-sqlserver:/tmp/seed-test-data.sql

# 執行腳本
docker exec -i dms-sqlserver /opt/mssql-tools/bin/sqlcmd \
  -S localhost \
  -U sa \
  -P 'DmsSystem@2024' \
  -d DMS \
  -i /tmp/seed-test-data.sql
```

#### 方式 C：使用提供的腳本

```bash
./scripts/load-test-data.sh
```

## 方法二：使用 EF Core Migrations（如果已設定）

```bash
cd DmsSystem.Api
dotnet ef database update
```

## 方法三：手動插入（用於測試）

使用 SQL Server Management Studio 或 Azure Data Studio 連接到資料庫，然後執行 `scripts/seed-test-data.sql` 中的 SQL 語句。

## 驗證資料已載入

### 檢查股東會明細資料

```bash
docker exec -it dms-sqlserver /opt/mssql-tools/bin/sqlcmd \
  -S localhost \
  -U sa \
  -P 'DmsSystem@2024' \
  -d DMS \
  -Q "SELECT COUNT(*) FROM RIS.SHMT_SOURCE1"
```

### 檢查公司資訊資料

```bash
docker exec -it dms-sqlserver /opt/mssql-tools/bin/sqlcmd \
  -S localhost \
  -U sa \
  -P 'DmsSystem@2024' \
  -d DMS \
  -Q "SELECT COUNT(*) FROM RIS.SHMT_SOURCE4"
```

## 測試資料內容

### 股東會明細 (SHMT_SOURCE1)
- 台積電 (2330) - 2024-06-15 年度股東常會
- 鴻海 (2317) - 2024-06-20 年度股東常會
- 聯發科 (2454) - 2024-07-10 臨時股東會

### 公司資訊 (SHMT_SOURCE4)
- 台積電基本資訊
- 鴻海基本資訊
- 聯發科基本資訊

## 在網頁上查看資料

1. 啟動 API：
```bash
cd DmsSystem.Api
dotnet run
```

2. 啟動 React 前端：
```bash
cd react-client
npm run dev
```

3. 訪問 http://localhost:5173
4. 點擊「資料檢視」標籤
5. 選擇不同的資料類型查看

## 清除測試資料（可選）

```bash
docker exec -it dms-sqlserver /opt/mssql-tools/bin/sqlcmd \
  -S localhost \
  -U sa \
  -P 'DmsSystem@2024' \
  -d DMS \
  -Q "DELETE FROM RIS.SHMT_SOURCE1; DELETE FROM RIS.SHMT_SOURCE4;"
```

